worker_processes  1;

events {
    worker_connections  1024;
}

http {
    upstream backend {
        least_conn;
        server 120.76.119.176:5678;
    }

    server {
        listen       80;
        server_name  localhost;

        location / {
            proxy_pass http://backend;
            # 添加反代节点的 IP 地址到响应头
            add_header X-Upstream-Addr $upstream_addr;
        }

        # 对静态文件进行缓存
        location ~* \.(jpg|jpeg|png|gif|ico|css|js|pdf|svg|woff|woff2|ttf|eot)$ {
            expires 30d;
            add_header Cache-Control "public, no-transform";
        }
    }
}
